<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Matter.js Emoji ç‰©ç†æ¨¡æ“¬</title>
    <style>
        canvas {
            border: 1px solid #333;
        }
        body {
            margin: 0;
            padding: 20px;
            overflow: hidden;
        }
        #textCanvas {
            display: none;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>
<body>
<canvas id="textCanvas"></canvas>
<script>
// å»ºç«‹ä¸€å€‹å‡½æ•¸å°‡ emoji è½‰æ›ç‚ºåœ–ç‰‡ URL
function emojiToURL(emoji, size = 50) {
    const canvas = document.getElementById('textCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = size;
    canvas.height = size;
    
    ctx.clearRect(0, 0, size, size);
    ctx.font = `${size * 0.8}px Arial`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(emoji, size/2, size/2);
    
    return canvas.toDataURL();
}

// Matter.js æ¨¡çµ„åˆ¥å
const Engine = Matter.Engine,
    Render = Matter.Render,
    Runner = Matter.Runner,
    Bodies = Matter.Bodies,
    Composite = Matter.Composite,
    Constraint = Matter.Constraint,
    MouseConstraint = Matter.MouseConstraint,
    Mouse = Matter.Mouse;

// å»ºç«‹å¼•æ“
const engine = Engine.create();
const world = engine.world;

// å»ºç«‹æ¸²æŸ“å™¨
const render = Render.create({
    element: document.body,
    engine: engine,
    options: {
        width: window.innerWidth - 40,
        height: window.innerHeight - 40,
        wireframes: false,
        background: '#f0f0f0'
    }
});

// å»ºç«‹åœ°é¢å’Œç‰†å£ï¼ˆä½¿ç”¨æœ¨æè¡¨æƒ…ç¬¦è™Ÿä½œç‚ºæè³ªï¼‰
const groundTexture = emojiToURL('ğŸªµ', 60);
const ground = Bodies.rectangle(render.canvas.width/2, render.canvas.height, render.canvas.width, 60, { 
    isStatic: true,
    render: {
        sprite: {
            texture: groundTexture,
            xScale: render.canvas.width/60,
            yScale: 1
        }
    }
});

// å½ˆæ€§ç´„æŸç¤ºç¯„ - å…©å€‹æ–¹å½¢ï¼ˆä½¿ç”¨ç¦®ç‰©ç›’è¡¨æƒ…ç¬¦è™Ÿï¼‰
const giftTexture = emojiToURL('ğŸ');
const box1 = Bodies.rectangle(300, 300, 50, 50, {
    render: {
        sprite: {
            texture: giftTexture,
            xScale: 1,
            yScale: 1
        }
    }
});
const box2 = Bodies.rectangle(400, 300, 50, 50, {
    render: {
        sprite: {
            texture: giftTexture,
            xScale: 1,
            yScale: 1
        }
    }
});

// å½ˆæ€§ç´„æŸ
const springConstraint = Constraint.create({
    bodyA: box1,
    bodyB: box2,
    stiffness: 0.01,
    render: {
        strokeStyle: '#ff0000',
        lineWidth: 5
    }
});

// å½ˆæ€§ç´„æŸç¤ºç¯„ - åœ“çƒï¼ˆä½¿ç”¨ç±ƒçƒè¡¨æƒ…ç¬¦è™Ÿï¼‰å’Œå›ºå®šé»
const ballTexture = emojiToURL('ğŸ€');
const circle1 = Bodies.circle(500, 300, 25, {
    render: {
        sprite: {
            texture: ballTexture,
            xScale: 1,
            yScale: 1
        }
    }
});

const springConstraint2 = Constraint.create({
    pointA: { x: 500, y: 100 },
    bodyB: circle1,
    stiffness: 0.01,
    render: {
        strokeStyle: '#00ff00',
        lineWidth: 5
    }
});

// å‰›æ€§ç´„æŸç¤ºç¯„ - å…©å€‹åœ“ï¼ˆä½¿ç”¨æœˆäº®å’Œå¤ªé™½è¡¨æƒ…ç¬¦è™Ÿï¼‰
const moonTexture = emojiToURL('ğŸŒ•', 100);
const sunTexture = emojiToURL('â˜€ï¸', 50);
const bigCircle = Bodies.circle(700, 300, 50, {
    render: {
        sprite: {
            texture: moonTexture,
            xScale: 1,
            yScale: 1
        }
    }
});
const smallCircle = Bodies.circle(700, 500, 25, {
    render: {
        sprite: {
            texture: sunTexture,
            xScale: 1,
            yScale: 1
        }
    }
});

const stiffConstraint = Constraint.create({
    bodyA: bigCircle,
    bodyB: smallCircle,
    length: 200,
    stiffness: 1,
    render: {
        strokeStyle: '#0000ff',
        lineWidth: 5
    }
});

// å‰›æ€§ç´„æŸç¤ºç¯„ - åœ“çƒå’Œå›ºå®šé»
const earthTexture = emojiToURL('ğŸŒ');
const circle2 = Bodies.circle(900, 300, 25, {
    render: {
        sprite: {
            texture: earthTexture,
            xScale: 1,
            yScale: 1
        }
    }
});

const stiffConstraint2 = Constraint.create({
    pointA: { x: 900, y: 100 },
    bodyB: circle2,
    length: 200,
    stiffness: 1,
    render: {
        strokeStyle: '#purple',
        lineWidth: 5
    }
});

// å»ºç«‹æ–¹å¡Šå¡”ï¼ˆä½¿ç”¨ç£šå¡Šè¡¨æƒ…ç¬¦è™Ÿï¼‰
const brickTexture = emojiToURL('ğŸ§±');
const stack = [];
for (let i = 0; i < 10; i++) {
    for (let j = 0; j < 2; j++) {
        stack.push(
            Bodies.rectangle(
                render.canvas.width - 150 + j * 50,
                render.canvas.height - 30 - i * 50,
                40,
                40,
                {
                    render: {
                        sprite: {
                            texture: brickTexture,
                            xScale: 0.8,
                            yScale: 0.8
                        }
                    }
                }
            )
        );
    }
}

// åŠ å…¥æ»‘é¼ æ§åˆ¶
const mouse = Mouse.create(render.canvas);
const mouseConstraint = MouseConstraint.create(engine, {
    mouse: mouse,
    constraint: {
        stiffness: 0.2,
        render: {
            visible: false
        }
    }
});

// å°‡æ‰€æœ‰ç‰©ä»¶åŠ å…¥ä¸–ç•Œ
Composite.add(world, [
    ground,
    box1, box2, springConstraint,
    circle1, springConstraint2,
    bigCircle, smallCircle, stiffConstraint,
    circle2, stiffConstraint2,
    mouseConstraint,
    ...stack
]);

// å•Ÿå‹•æ¸²æŸ“å™¨å’Œå¼•æ“
Render.run(render);
const runner = Runner.create();
Runner.run(runner, engine);

// é˜²æ­¢å³éµé¸å–®
render.canvas.addEventListener('contextmenu', (e) => e.preventDefault());
</script>
</body>
</html>
